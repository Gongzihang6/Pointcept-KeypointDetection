/* ==========================================================================
   1. 字体配置 (保持不变)
   ========================================================================== */
@import url('https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-web/style.css');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');

:root {
    --md-code-font: "JetBrains Mono", Consolas, Menlo, Monaco, monospace;
}

body, .md-typeset {
    font-family: "LXGW WenKai Screen", sans-serif !important;
}

code, kbd, pre {
    font-family: var(--md-code-font) !important;
}

/* ==========================================================================
   2. 基础元素修复 (保持不变)
   ========================================================================== */
.md-typeset p { text-indent: 2em; }
.md-typeset li p, .md-typeset blockquote p, .md-typeset td p { text-indent: 0 !important; }
footer.md-footer { background-color: #ffffff !important; color: #333333 !important; }
.md-footer__meta { background-color: #f9f9f9 !important; color: #555555 !important; border-top: 1px solid #e0e0e0; }
.md-footer__inner { background-color: #ffffff !important; }
.md-footer__meta a, .md-footer__inner a { color: #009485 !important; font-weight: bold; }
.md-footer-copyright__highlight { display: none !important; }

/* ==========================================================================
   3. 代码块行号对齐修复 (核心修改)
   ========================================================================== */

/* --- 容器卡片化 --- */
.md-typeset .codehilitetable {
    background-color: #fafafa;
    border-radius: 24px !important;
    border: 2px solid #e0e0e0;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.02);
    display: block;
    overflow-x: auto;
    margin-bottom: 1em;
    border-spacing: 0;
    border-collapse: collapse;
}

/* --- 第一层：表格单元格重置 --- */
.md-typeset table.codehilitetable tr td {
    padding: 0 !important;
    border: none !important;
    vertical-align: top !important;
}

/* --- 第二层：内部 PRE 标签统一设置 --- */
.md-typeset table.codehilitetable tr td.linenos pre,
.md-typeset table.codehilitetable tr td.code pre {
    font-family: var(--md-code-font) !important;
    font-size: 14px !important;
    font-weight: 500 !important;
    margin: 0 !important;
    padding-top: 10px !important;    
    padding-bottom: 10px !important;
    
    /* 【核心修复】统一行高和显示方式 */
    line-height: 1.6 !important;  /* 使用相对值更稳定 */
    display: block !important;
    vertical-align: baseline !important;
}

/* --- 行号列 (左侧) --- */
.md-typeset table.codehilitetable tr td.linenos {
    border-right: 2px solid #eee !important;
    background-color: transparent !important;
    min-width: 30px;
    text-align: right;
}

.md-typeset table.codehilitetable tr td.linenos pre {
    color: #b0bec5;
    padding-left: 10px !important;
    padding-right: 10px !important;
}

/* --- 行号内部的 span 强制继承行高 --- */
.md-typeset table.codehilitetable tr td.linenos pre span {
    font-family: var(--md-code-font) !important;
    line-height: 1.6 !important;  /* 和 pre 保持一致 */
    display: block !important;     /* 强制块级显示，确保行高生效 */
}

/* --- 代码列 (右侧) --- */
.md-typeset table.codehilitetable tr td.code {
    width: 100%;
}

.md-typeset table.codehilitetable tr td.code pre {
    padding-left: 16px !important;
    width: 100%;
}

/* --- 代码内部元素强制继承 --- */
.md-typeset table.codehilitetable tr td.code pre code,
.md-typeset table.codehilitetable tr td.code pre span {
    font-family: var(--md-code-font) !important;
    line-height: inherit !important;  /* 继承父元素的 1.8 */
    vertical-align: baseline !important;
    display: inline !important;
}

/* --- 兜底：无行号代码块 --- */
.md-typeset pre > code {
    font-family: var(--md-code-font) !important;
    font-size: 14px !important;
    line-height: 1.6 !important;
    font-weight: 500;
    background-color: #fafafa;
    border-radius: 8px;
    border: 2px solid #e0e0e0;
    padding: 12px;
    color: #24292e;
}

.md-typeset table.codehilitetable pre > code {
    background: transparent !important;
    border: none !important;
    padding: 0 !important;
}

/* ==========================================================================
   4. 语法高亮配色
   ========================================================================== */
.md-typeset .k, .md-typeset .kd, .md-typeset .kp, .md-typeset .kr, .md-typeset .kt { color: #d73a49; font-weight: bold; }
.md-typeset .nf, .md-typeset .nc { color: #6f42c1; font-weight: 600; }
.md-typeset .s, .md-typeset .s1, .md-typeset .s2 { color: #22863a; }
.md-typeset .c, .md-typeset .c1, .md-typeset .cs, .md-typeset .cm { color: #6a737d; font-style: italic; }
.md-typeset .m, .md-typeset .mi { color: #005cc5; }
.md-typeset .cp { color: #005cc5; font-weight: bold; }

/* 修改文档宽度占比 */
.md-main__inner.md-grid {
    max-width: 85% !important;
}